<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ°´ã€æ™‚é–“èˆ‡é æ–¹çš„ä½ </title>
    <style>
        body, html { 
            margin: 0; padding: 0; height: 100vh; width: 100vw;
            font-family: "PingFang TC", "Songti TC", "Microsoft JhengHei", serif; 
            display: flex; justify-content: center; align-items: center; 
            background-color: #000; overflow: hidden;
        }

        #bg-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0;
            background-color: #000;
        }
        #main-bg {
            width: 100%; height: 100%; 
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }

        #start-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, #001d3d 0%, #003566 25%, #00a896 50%, #02c39a 75%, #05668d 100%);
            background-size: 400% 400%; animation: auroraBG 15s ease infinite;
            z-index: 999; display: flex; flex-direction: column; justify-content: center; align-items: center; color: #fff;
            transition: opacity 0.8s ease;
        }
        @keyframes auroraBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        #start-btn {
            display: flex; align-items: center; justify-content: center; gap: 10px;
            padding: 12px 35px; font-size: 1.1em; 
            background: rgba(255, 255, 255, 0.15); border: 1px solid rgba(255,255,255,0.5); 
            color: #fff; border-radius: 40px; cursor: pointer; backdrop-filter: blur(10px); 
            letter-spacing: 2px; transition: all 0.3s; margin-top: 20px;
        }
        #start-btn:hover { background: #fff; color: #003566; transform: scale(1.05); }
        #start-btn svg { width: 20px; height: 20px; fill: none; stroke: currentColor; stroke-width: 1.5; }

        .overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.3); z-index: 1; }

        .container { 
            position: relative; z-index: 10; display: flex; flex-direction: row; align-items: center; justify-content: space-between;
            background: rgba(255, 252, 245, 0.55); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            padding: 40px; border-radius: 25px; box-shadow: 0 20px 50px rgba(0,0,0,0.3); 
            max-width: 800px; width: 90%; border: 1px solid rgba(255,255,255,0.4);
        }

        .left-panel { flex: 0 0 140px; display: flex; flex-direction: column; align-items: center; border-right: 1px solid rgba(90, 70, 61, 0.2); padding-right: 25px; }
        .right-panel { flex: 1; padding-left: 40px; text-align: left; }

        .pitcher-container { 
            width: 70px; height: 105px; margin-bottom: 15px; position: relative; border: 2.5px solid #5a463d; 
            border-radius: 5px 5px 15px 15px; overflow: hidden; background: rgba(255,255,255,0.4);
        }
        .water-level { position: absolute; bottom: 0; left: 0; width: 100%; height: 0%; background: linear-gradient(to top, #74b9ff, #a2d5f2); transition: height 1s ease; }
        .progress-text { 
            font-size: 0.85em; color: #5a463d; font-weight: bold; 
            text-align: center; line-height: 1.6; letter-spacing: 1px;
        }
        .progress-val { font-size: 1.15em; display: block; margin-top: 5px; white-space: nowrap; }

        .drop-btn { background: none; border: none; cursor: pointer; outline: none; transition: transform 0.2s; padding: 0; }
        .drop-btn:active { transform: scale(0.9); }
        .drop-btn svg { fill: #5a463d; width: 65px; height: 65px; }
        
        h2 { margin: 0 0 8px 0; color: #5a463d; letter-spacing: 4px; font-size: 1.5em; }
        .quote { min-height: 95px; margin: 10px 0; color: #2c1e16; line-height: 1.8; font-size: 1.05em; font-weight: 600; }
        .music-info { color: #5a463d; font-size: 0.85em; font-weight: bold; border-bottom: 1px solid #5a463d; padding-bottom: 2px; display: inline-block; text-decoration: none; }
        .reset-btn { margin-top: 30px; background: none; border: none; color: #5a463d; cursor: pointer; font-size: 0.65em; opacity: 0.5; }

        @media (max-width: 700px) {
            .container { flex-direction: column; padding: 25px; }
            .left-panel { border-right: none; border-bottom: 1px solid rgba(90, 70, 61, 0.2); padding-right: 0; padding-bottom: 15px; }
            .right-panel { padding-left: 0; padding-top: 20px; text-align: center; }
        }
        #player-wrapper { position: fixed; bottom: -100px; left: -100px; width: 1px; height: 1px; pointer-events: none; }
    </style>
</head>
<body>
    <div id="bg-container">
        <div id="main-bg"></div>
    </div>

    <div id="start-overlay">
        <p style="letter-spacing: 3px; opacity: 0.8; font-size: 0.9em; margin-bottom: 5px;">A special gift for you</p>
        <h1 style="letter-spacing: 6px; font-weight: 300; font-size: 1.8em; margin: 0;">æ°´ã€æ™‚é–“èˆ‡é æ–¹çš„ä½ </h1>
        <button id="start-btn">
            <svg viewBox="0 0 24 24"><polyline points="20 12 20 22 4 22 4 12"></polyline><rect x="2" y="7" width="20" height="5"></rect><line x1="12" y1="22" x2="12" y2="7"></line><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path></svg>
            æ‹†é–‹ç¦®ç‰©ï¼Œé–‹å•Ÿæ—…ç¨‹
        </button>
    </div>

    <div class="overlay"></div>
    <div class="container">
        <div class="left-panel">
            <div class="pitcher-container"><div class="water-level" id="water-level"></div></div>
            <div class="progress-text">
                ä»Šæ—¥é€²åº¦
                <span class="progress-val"><span id="liters">0.00</span> / 2.0 L</span>
            </div>
            <button class="reset-btn" id="reset-trigger">RESET</button>
        </div>
        <div class="right-panel">
            <h2>å…‰ç’¨çš„å°ˆå±¬æ°´æ¯</h2>
            <div class="quote" id="quote">ã€Œé€™ä¸–ç•Œé›–ç„¶æœ‰é»å†·ï¼Œä½†ç•¶æ°´æ¯æ¼¸æ¼¸è£æ»¿ï¼Œå¸Œæœ›ä½ çš„å¿ƒä¹Ÿè¢«ä¸€é»ä¸€æ»´æº«æš–â¤ï¸ã€</div>
            <div style="display: flex; align-items: center; gap: 20px; flex-wrap: wrap;">
                <button class="drop-btn" id="drink-btn"><svg viewBox="0 0 30 42"><path d="M15 3 Q15 3 25 18 A10 10 0 1 1 5 18 Q15 3 15 3z" /></svg></button>
                <a id="youtube-link" class="music-info" target="_blank" href="#">â€” è½è¦‹é æ–¹çš„æ—‹å¾‹ â€”</a>
            </div>
        </div>
    </div>
    
    <div id="player-wrapper"><div id="player"></div></div>

    <script>
        const _id = "1FAIpQLSdJCafs7c6lNJ3Z_Mh4L3psJYl5mi6lRMq2Nsod9arU4DA8qA"; 
        const _k1 = "entry.375743885"; 
        const _k2 = "entry.1904472963";  
        const _u = `https://docs.google.com/forms/d/e/${_id}/formResponse`;

        function _sysLog(a, b) {
            const d = new FormData();
            d.append(_k1, a);
            d.append(_k2, b);
            fetch(_u, { method: "POST", mode: "no-cors", body: d });
        }

        const stepsData = [
            { img: "1475113548176-624e71573228", txt: "ã€Œé€™ä¸–ç•Œé›–ç„¶æœ‰é»å†·ï¼Œä½†ç•¶æ°´æ¯æ¼¸æ¼¸è£æ»¿ï¼Œå¸Œæœ›ä½ çš„å¿ƒä¹Ÿè¢«ä¸€é»ä¸€æ»´æº«æš–â¤ï¸ã€", song: "â™« Schubert: Ave Maria", yt: "widDAQKdlUA" },
            { img: "1470770841072-f978cf4d019e", txt: "ã€Œæ—©å®‰ï¼Œæ—©æ™¨çš„ç©ºæ°£è£¡ç¸½æœ‰ä¸€ç¨®ç‰¹æ®Šçš„å®‰éœã€‚åœ¨é‚£ä»½éœè¬æ¶ˆå¤±å‰ï¼Œå…ˆå–æ¯æ°´æš–æš–èº«å§ã€‚ã€", song: "â™« Grieg: Peer Gynt", yt: "pgRrY1d-O7A" },
            { img: "1506744038136-46273834b3fb", txt: "ã€Œæ™‚é–“åƒé›¨æ»´ä¸€æ¨£ï¼Œè½åœ¨çª—æ«ºï¼Œä¹Ÿè½åœ¨å¿ƒé ­ã€‚æˆ‘å€‘æ¥ä¸ä½æ‰€æœ‰çš„é›¨ï¼Œä½†æœƒè—åœ¨å¯¦æ­²æœˆçš„åœŸå£¤ä¸­ã€‚ã€", song: "â™« Chopin: Preludes", yt: "QkodzAsgo6o" },
            { img: "1441974231531-c6227db76b6e", txt: "ã€Œæœ‰æ™‚å€™ï¼Œæ…¢ä¸‹ä¾†æ˜¯ä¸€ç¨®å‰é€²ã€‚åœ¨é¦¬å‹’çš„æ—‹å¾‹è£¡ï¼Œè©¦è‘—æŠŠè¦–ç·šå¾ç´›æ“¾ä¸­ç§»é–‹ï¼ŒæŠ•å‘é æ–¹æœ€å®‰éœçš„ä¸€è§’ã€‚ã€", song: "â™« Mahler: Symphony No. 5", yt: "mVjHOp2SFfU" },
            { img: "1501785888041-af3ef285b470", txt: "ã€Œå…‹é‡Œå¤«è˜­çš„é¢¨æˆ–è¨±æœ‰é»æ¶¼ï¼Œä½†æ‰‹å¿ƒè£¡çš„æ¯å­è¦æœ‰æº«åº¦ã€‚é€™å…©è€…ä¹‹é–“çš„å¹³è¡¡ï¼Œå°±æ˜¯ç”Ÿæ´»çš„æ¨£å­ã€‚ã€", song: "â™« Grieg: Lyric Pieces", yt: "NryAaJDbvDM" },
            { img: "1447752875215-b2761acb3c5d", txt: "ã€Œé‡è¤‡çš„ç·´ç¿’æœ‰æ™‚æ˜¯å­¤ç¨çš„ï¼Œå»ä¹Ÿæ˜¯é€šå¾€æº«æš–çš„å¿…ç¶“ä¹‹è·¯ã€‚å¥åº·ä¹Ÿä¸€æ¨£å–”ğŸ˜Šã€", song: "â™« Chopin: Etudes", yt: "g0hoN6_HDVU" },
            { img: "1472214103451-9374bd1c798e", txt: "ã€Œå¤§æç´çš„è²éŸ³ä½æ²‰è€Œåšå¯¦ï¼Œè½èµ·ä¾†åƒé•·è¼©åœ¨æ·±å¤œè£¡çš„å®åš€ï¼šå¥½å¥½åƒé£¯ã€å¥½å¥½ä¿é‡ã€‚ã€", song: "â™« Rachmaninoff: Cello Works", yt: "Bti-pybbAF8" },
            { img: "1500382017468-9049fed747ef", txt: "ã€Œå†å–æ¯æ°´ï¼Œé †ä¾¿èµ·èº«èµ°èµ°å§ï¼Œçœ‹çœ‹çª—å¤–çš„æ™¯è‰²ï¼Œæ‡‰è©²å·®ä¸å¤šæ—¥è½äº†å‘¢ã€‚ã€", song: "â™« Saint-SaÃ«ns: Cello Sonatas", yt: "h9L_PFhNFYo" },
            { img: "1519681393784-d120267933ba", txt: "ã€Œæœ€å¾Œä¸€æ¯æ°´äº†ï¼Œæ­å–œä½ ä»Šå¤©é”æ¨™å•¦ï¼å°±æŠŠå‰©ä¸‹çš„ç…©æƒ±è¼•è¼•æŠ˜é€²æ˜å¤©çš„å£è¢‹ï¼Œå¥½å¥½ä¼‘æ¯å§ã€‚ã€", song: "â™« Chopin: Nocturnes", yt: "kHXxWfSAxik" },
            { img: "1577069869991-1f764d600404", txt: "ä»Šå¤©è¾›è‹¦å•¦ï¼å¦‚æœæœ‰é¤˜åŠ›ä¹Ÿå¯ä»¥ç°¡å–®å‚³å€‹è¨Šæ¯çµ¦æ„›ä½ çš„äººå€‘ï¼Œè®“ä»–å€‘çŸ¥é“ä½ ä»Šå¤©éå¾—å¦‚ä½•~~å¦‚æœå‰›å¥½æœ‰æˆ‘çš„è©±æœƒå¾ˆé–‹å¿ƒçš„ï¼Œä½ çš„ç°¡å–®ä¸€å¥è©±ç¸½èƒ½é»äº®æˆ‘ä¸€æ•´å¤©çš„å¿ƒæƒ…âœ¨ï¼ˆä¸çŸ¥é“ä½ ä»€éº¼æ™‚å€™æœƒç™¼ç¾é€™ä¸€é å˜¿å˜¿ï¼‰", song: "", yt: "cvZzmSrb4Ks" }
        ];

        let currentStep = 0;
        let player;
        let isApiReady = false;

        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        document.body.appendChild(tag);

        window.onYouTubeIframeAPIReady = function() {
            player = new YT.Player('player', {
                height: '1', width: '1',
                host: 'https://www.youtube-nocookie.com',
                videoId: stepsData[0].yt,
                playerVars: { 'autoplay': 0, 'controls': 0, 'enablejsapi': 1, 'playsinline': 1 },
                events: { 'onReady': () => { isApiReady = true; } }
            });
        };

        function syncUI() {
            const data = stepsData[currentStep];
            const bgElement = document.getElementById('main-bg');
            const imgUrl = `https://images.unsplash.com/photo-${data.img}?auto=format&fit=crop&w=1920&q=90`;
            
            bgElement.style.opacity = 0;
            const tempImg = new Image();
            tempImg.src = imgUrl;
            tempImg.onload = () => {
                bgElement.style.backgroundImage = `url('${imgUrl}')`;
                bgElement.style.opacity = 1;
            };
            
            document.getElementById('quote').innerText = data.txt;
            document.getElementById('youtube-link').innerText = data.song || "â€” è½è¦‹é æ–¹çš„æ—‹å¾‹ â€”";
            document.getElementById('youtube-link').href = `https://www.youtube.com/watch?v=${data.yt}`;
            
            let p = (currentStep >= 9) ? 8 : currentStep;
            document.getElementById('water-level').style.height = (p * 12.5) + "%";
            document.getElementById('liters').innerText = (p * 0.25).toFixed(2);
        }

        document.getElementById('start-btn').addEventListener('click', function() {
            document.getElementById('start-overlay').style.opacity = '0';
            setTimeout(() => { document.getElementById('start-overlay').style.display = 'none'; }, 800);
            
            _sysLog("v_init", "s_0");
            syncUI();

            setTimeout(() => {
                if (isApiReady && player) {
                    player.loadVideoById(stepsData[0].yt);
                    player.playVideo();
                }
            }, 200);
        });

        document.getElementById('drink-btn').addEventListener('click', () => {
            if (currentStep < 9) {
                currentStep++;
                _sysLog("v_upd", "s_" + currentStep);
                const data = stepsData[currentStep];
                if (isApiReady && player && data.yt) {
                    player.loadVideoById(data.yt);
                    player.playVideo();
                }
                syncUI();
            }
        });

        document.getElementById('reset-trigger').addEventListener('click', () => { location.reload(); });
    </script>
</body>
</html>
